# Environment Configuration for GRC AI Platform
# Multi-Tenant SaaS Platform for AI-Powered GRC Extensions
# Copy this file to .env and fill in your actual values

# =============================================================================
# GENERAL APPLICATION SETTINGS
# =============================================================================
NODE_ENV=development
LOG_LEVEL=debug
PORT=3000
ENABLE_DEBUG_LOGS=true

# Application metadata
APP_NAME=GRC AI Platform
APP_VERSION=1.0.0
APP_DESCRIPTION=Multi-Tenant SaaS Platform for AI-Powered GRC Extensions

# =============================================================================
# AZURE CONFIGURATION
# =============================================================================

# Azure AD B2C Configuration (Multi-tenant authentication)
AZURE_AD_B2C_TENANT_ID=your-b2c-tenant-id
AZURE_AD_B2C_CLIENT_ID=your-b2c-client-id
AZURE_AD_B2C_CLIENT_SECRET=your-b2c-client-secret
AZURE_AD_B2C_DOMAIN=your-tenant.onmicrosoft.com
AZURE_AD_B2C_POLICY_SIGN_UP_SIGN_IN=B2C_1_signupsignin
AZURE_AD_B2C_POLICY_EDIT_PROFILE=B2C_1_profileediting
AZURE_AD_B2C_POLICY_RESET_PASSWORD=B2C_1_passwordreset

# Azure Service Principal (for service-to-service authentication)
AZURE_TENANT_ID=your-azure-tenant-id
AZURE_CLIENT_ID=your-service-principal-client-id
AZURE_CLIENT_SECRET=your-service-principal-secret
AZURE_SUBSCRIPTION_ID=your-azure-subscription-id

# Azure Cosmos DB Configuration
COSMOS_DB_ENDPOINT=https://your-cosmos-account.documents.azure.com:443/
COSMOS_DB_KEY=your-cosmos-primary-key
COSMOS_DB_DATABASE_NAME=grc-ai-platform
COSMOS_DB_CONTAINER_TENANTS=tenants
COSMOS_DB_CONTAINER_AGENTS=agents
COSMOS_DB_CONTAINER_MCP_REGISTRY=mcp-registry
COSMOS_DB_CONTAINER_AUDIT_LOGS=audit-logs

# Azure Key Vault Configuration
AZURE_KEY_VAULT_URL=https://your-keyvault.vault.azure.net/
KEY_VAULT_TENANT_SECRETS_PREFIX=tenant-secrets-
KEY_VAULT_LLM_CONFIGS_PREFIX=llm-configs-
KEY_VAULT_MCP_CREDENTIALS_PREFIX=mcp-creds-

# Azure Storage Account (for blob storage and file uploads)
AZURE_STORAGE_ACCOUNT_NAME=your-storage-account
AZURE_STORAGE_ACCOUNT_KEY=your-storage-key
AZURE_STORAGE_CONTAINER_UPLOADS=uploads
AZURE_STORAGE_CONTAINER_EXPORTS=exports

# Azure Application Insights (for monitoring and telemetry)
APPINSIGHTS_INSTRUMENTATIONKEY=your-appinsights-key
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-key;IngestionEndpoint=https://region.in.applicationinsights.azure.com/

# =============================================================================
# MULTI-TENANT CONFIGURATION
# =============================================================================

# Tenant isolation settings
ENABLE_TENANT_ISOLATION=true
DEFAULT_TENANT_TIER=standard
MAX_TENANTS_PER_SUBSCRIPTION=100
TENANT_DATA_ENCRYPTION_KEY=your-tenant-data-encryption-key

# Tenant provisioning
TENANT_PROVISIONING_WEBHOOK_URL=https://your-provisioning-service.com/webhook
TENANT_BILLING_WEBHOOK_URL=https://your-billing-service.com/webhook

# =============================================================================
# MCP (MODEL CONTEXT PROTOCOL) CONFIGURATION
# =============================================================================

# MCP Registry settings
MCP_REGISTRY_BASE_URL=https://your-mcp-registry.com
MCP_REGISTRY_API_KEY=your-mcp-registry-api-key
MCP_SERVER_HEALTH_CHECK_INTERVAL=300000
MCP_SERVER_TIMEOUT=30000

# Default MCP servers (comma-separated list of approved servers)
DEFAULT_MCP_SERVERS=archer-grc,compliance-tools,risk-assessment

# MCP security settings
ENABLE_MCP_SIGNATURE_VERIFICATION=true
MCP_ALLOWED_ORIGINS=https://your-frontend-domain.com,https://localhost:5173
MCP_RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# AI/LLM CONFIGURATION
# =============================================================================

# Platform-provided Azure OpenAI
AZURE_OPENAI_ENDPOINT=https://your-openai.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-key
AZURE_OPENAI_API_VERSION=2023-12-01-preview
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4
AZURE_OPENAI_MODEL_VERSION=gpt-4-32k

# Default LLM settings
DEFAULT_LLM_PROVIDER=azure-openai
DEFAULT_MODEL_NAME=gpt-4
DEFAULT_MAX_TOKENS=4000
DEFAULT_TEMPERATURE=0.7

# AI safety and compliance
ENABLE_CONTENT_FILTERING=true
ENABLE_PII_DETECTION=true
ENABLE_BIAS_DETECTION=true
AI_USAGE_LOGGING=true

# =============================================================================
# SECURITY AND COMPLIANCE CONFIGURATION
# =============================================================================

# Encryption settings
ENCRYPTION_KEY=your-application-encryption-key
JWT_SECRET=your-jwt-secret-key
SESSION_SECRET=your-session-secret
CRYPTO_ALGORITHM=aes-256-gcm

# Session management
SESSION_TIMEOUT=3600000
REFRESH_TOKEN_EXPIRY=604800000
REMEMBER_ME_DURATION=2592000000

# Security headers and CORS
CORS_ORIGINS=https://your-frontend-domain.com,https://localhost:5173
ENABLE_HELMET_SECURITY=true
ENABLE_RATE_LIMITING=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Audit logging
ENABLE_AUDIT_LOGS=true
AUDIT_LOG_RETENTION_DAYS=2555
AUDIT_LOG_STORAGE_TYPE=azure-blob
ENABLE_TAMPER_EVIDENT_LOGS=true

# Compliance frameworks
COMPLIANCE_FRAMEWORKS=ISO27001,SOC2,CPS230
ENABLE_GDPR_COMPLIANCE=true
ENABLE_CCPA_COMPLIANCE=true
DATA_RESIDENCY_REGION=australia-east

# =============================================================================
# DATABASE AND CACHING CONFIGURATION
# =============================================================================

# Redis Configuration (for caching and session storage)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DATABASE=0
REDIS_TTL=3600

# Cache settings
ENABLE_REDIS_CACHING=true
CACHE_DEFAULT_TTL=300
CACHE_MAX_SIZE=1000

# =============================================================================
# EMAIL AND NOTIFICATIONS CONFIGURATION
# =============================================================================

# Azure Communication Services (for email notifications)
AZURE_COMMUNICATION_CONNECTION_STRING=your-communication-service-connection-string
EMAIL_FROM_ADDRESS=noreply@your-domain.com
EMAIL_FROM_NAME=GRC AI Platform

# Notification settings
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_WEBHOOK_NOTIFICATIONS=true
NOTIFICATION_RETRY_ATTEMPTS=3

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Health check endpoints
HEALTH_CHECK_TIMEOUT=5000
ENABLE_DETAILED_HEALTH_CHECKS=true

# Metrics collection
ENABLE_PROMETHEUS_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Distributed tracing
ENABLE_OPENTELEMETRY=true
OTEL_EXPORTER_OTLP_ENDPOINT=https://your-otel-collector.com

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD=1000
MEMORY_USAGE_THRESHOLD=85

# =============================================================================
# DEVELOPMENT AND TESTING CONFIGURATION
# =============================================================================

# Development settings
ENABLE_HOT_RELOAD=true
ENABLE_SOURCE_MAPS=true
ENABLE_MOCK_SERVICES=false

# Testing configuration
TEST_DATABASE_URL=your-test-database-url
TEST_TENANT_ID=test-tenant-001
ENABLE_TEST_FIXTURES=true
TEST_TIMEOUT=30000

# Debug settings
ENABLE_REQUEST_LOGGING=true
ENABLE_QUERY_LOGGING=false
DEBUG_NAMESPACES=grc:*,mcp:*,auth:*

# =============================================================================
# EXTERNAL SERVICES CONFIGURATION
# =============================================================================

# Third-party integrations
WEBHOOK_SIGNING_SECRET=your-webhook-signing-secret
EXTERNAL_API_RATE_LIMIT=1000
EXTERNAL_API_TIMEOUT=30000

# Backup and disaster recovery
BACKUP_STORAGE_ACCOUNT=your-backup-storage-account
BACKUP_FREQUENCY=daily
BACKUP_RETENTION_DAYS=90

# =============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# =============================================================================

# Production overrides (only set in production)
# NODE_ENV=production
# LOG_LEVEL=info
# ENABLE_DEBUG_LOGS=false
# ENABLE_MOCK_SERVICES=false

# Staging overrides
# ENABLE_TEST_FIXTURES=true
# LOG_LEVEL=debug

# Local development overrides
# COSMOS_DB_ENDPOINT=https://localhost:8081
# REDIS_HOST=localhost
# ENABLE_MOCK_SERVICES=true